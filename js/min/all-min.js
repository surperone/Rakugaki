jQuery(document).ready(function($){"use strict";function e(){a(),I=$(window).height(),R=$(window).width(),k.css({height:I,width:R,position:"relative",overflow:"hidden"}),C.css("position","absolute"),y.css({position:"relative",width:R,height:I,"overflow-x":"auto","overflow-y":"hidden"}),"horizontal"===b.transition&&(C.css("width",x*R),y.css("float","left")),S(),t(),s(k),i(k)}function t(){$.address.init(function(){$.address.autoUpdate(!1)}).change(function(e){var t=e.value;t=e.value.substring(1),""!==t&&"undefined"!=typeof t&&y.filter("#"+t).size()>0?o(t):n()})}function a(){$("html, body").css({margin:0,padding:0,overflow:"hidden"}),$(window).resize(function(){I=$(window).height(),R=$(window).width(),k.css({width:R,height:I}),y.css({width:R,height:I});var e=p().index();-1!==e&&("horizontal"===b.transition?(C.css({width:x*R}),k.stop().scrollLeft(e*R)):k.stop().scrollTop(e*I))})}function s(){$(".special-anchor-direct").on(m,function(e){var t=$(this).attr("data-slide");return $(".slide-wrapper").hasClass("slide-wrapper-showdetail")&&($(".slide-wrapper").removeClass("slide-wrapper-showdetail"),setTimeout(function(){$(".slide-nav").fadeIn(),$(".info-trigger").fadeIn()},500),g()),$.address.value(t),$.address.update(),$(this).hasClass("menu-about")&&setTimeout(function(){console.log("GO TO NAME CARD"),e.stopPropagation(),$("#st-container").removeClass("st-menu-open"),$("#st-container").hasClass("st-menu-open")||$(".nav-trigger").css("opacity",1)},550),!1})}function i(){$(b.homeButton+".special-anchor").on(m,function(){n()}),$(b.prevButton+".special-anchor").on(m,function(){r()}),$(b.nextButton+".special-anchor").on(m,function(){d()})}function o(e,t){var a=y.filter("#"+e).index();l(a,t)}function n(e){$.address.value(y.eq(0).attr("id")),$.address.update(),e&&e()}function d(e){var t=p().index();++t===x&&(t=0),$.address.value(y.eq(t).attr("id")),$.address.update(),e&&e()}function r(e){var t=p().index();--t<0&&(t=x-1),$.address.value(y.eq(t).attr("id")),$.address.update(),e&&e()}function l(e,t){var a=p();if(e!==a.index()&&-1!==e){f().removeClass("prev"),a.removeClass("current").addClass("prev"),y.eq(e).addClass("current");var s;switch(D||(s=b.transitionSpeed,b.transitionSpeed=0,D=!0),b.transition){case"vertical":c(t);break;default:case"none":case"horizontal":u(t)}"undefined"!=typeof s&&(b.transitionSpeed=s)}else t&&t()}function u(e){k.stop().animate({scrollLeft:p().index()*R},b.transitionSpeed,b.easing,function(){e&&e()})}function c(e){k.stop().animate({scrollTop:p().index()*I},b.transitionSpeed,b.easing,function(){e&&e()})}function p(){return y.filter("div.current")}function f(){return y.filter("div.prev")}function h(e,t){$(".plot").css("visibility","visible");var a=5;$(".plot").css("width","30px"),$(".plot").css("height","30px"),$(".plot").css("left",e-15+"px"),$(".plot").css("top",t-15+"px"),$(".plot").css({opacity:.3}),$(".plot").animate({opacity:0,height:"40px",width:"40px",left:"-="+a+"px",top:"-="+a+"px"},300,function(){$(".plot").css("visibility","hidden")})}function g(){$("html").on("swipeleft",function(){d()}),$("html").on("swiperight",function(){r()})}function v(){$("html").off("swipeleft").off("swiperight")}var w=0,m="";Modernizr.touch?m="tap":(w=1,m="click"),$(document).on("touchmove",function(e){e.preventDefault()});var b={homeButton:".home-button",prevButton:".prev-button",nextButton:".next-button",transition:"horizontal",transitionSpeed:500,easing:"easeInOutQuint"},k=$(".slider"),C=k.children("div.slides"),y=C.children("div.slide"),x=y.length,D=!1,I=$(window).height(),R=$(window).width(),S=function(){$(document).keydown(function(e){var t=function(){var e=!1;return $(".slide-wrapper").each(function(){$(this).hasClass("slide-wrapper-showdetail")&&(e=!0)}),!e};if("textarea"!==e.target.type&&"text"!==e.target.type&&t()){var a=e.keyCode||e.which;switch(a){case 37:r();break;case 39:d()}}})};e(),w&&$(".st-pusher, .trigger, .md-trigger, .md-modal").on("click",function(e){h(e.pageX,e.pageY)}),g(),$(".md-trigger").on(m,function(e){console.log("MODAL TRIGGER TAPPED"),e.preventDefault();var t="#container-"+$(this).attr("data-modal");$(".slide-nav").fadeOut(),$(".info-trigger").fadeOut(),v(),$(t).addClass("slide-wrapper-showdetail")}),$(document).keydown(function(e){console.log("CLOSE MODAL");var t=e.keyCode||e.which;switch(t){case 27:$(".slide-wrapper").hasClass("slide-wrapper-showdetail")&&($(".slide-wrapper").removeClass("slide-wrapper-showdetail"),setTimeout(function(){$(".slide-nav").fadeIn(),$(".info-trigger").fadeIn()},500),g())}}),$(".select-button").on(m,function(e){console.log("SHOW/HIDE INDEX"),e.preventDefault(),"none"===$(".slide-index").css("display")?($(".slide-index").fadeIn(),$(this).css("background","#2b2b2b")):($(".slide-index").fadeOut(),$(this).css("background","#313131")),$(".works-info").removeClass("show")}),$("body, .st-pusher").on(m,function(e){e.stopPropagation(),$(".slide-index").fadeOut(),$(".select-button").css("background","#313131")}),$(".slide-index, .slide-nav").on(m,function(e){e.stopPropagation()}),$(".progress").each(function(){var e=parseInt($(this).attr("data-percent"));$(this).css("width",e+"%")}),$(".md-close").on(m,function(e){console.log("CLOSE MODAL"),e.preventDefault(),$(this).parent().parent().parent(".slide-wrapper").removeClass("slide-wrapper-showdetail"),setTimeout(function(){$(".slide-nav").fadeIn(),$(".info-trigger").fadeIn()},500),g()}),$(".coming").on(m,function(e){e.preventDefault(),$(this).html("Coming Soon")}),$.address.externalChange(function(){"/welcome"===$.address.value()?($.address.title("Rakugaki / Welcome"),$("#welcome .logo").addClass("fadeIn")):"/springtide"===$.address.value()?($.address.title("Rakugaki / Springtide"),$("#springtide .logo #springtide-logo").addClass("tada"),setTimeout(function(){$("#springtide .logo #springtide-logo").removeClass("tada")},1e3)):"/shiro"===$.address.value()?$.address.title("Rakugaki / Shiro"):"/kcalb"===$.address.value()?$.address.title("Rakugaki / Kcalb"):"/yabu-no-naka"===$.address.value()?($.address.title("Rakugaki / Yabu no Naka"),$("#yabu-no-naka .logo #yabu-logo").addClass("fadeInDown"),$(".bamboo .trigger").addClass("shake-delay"),setTimeout(function(){$(".bamboo .trigger").removeClass("shake-delay")},2e3)):"/about"===$.address.value()&&$.address.title("Rakugaki / Me")}),$.address.internalChange(function(){"/welcome"===$.address.value()?($.address.title("Rakugaki / Welcome"),$("#welcome .logo").addClass("fadeIn")):"/springtide"===$.address.value()?($.address.title("Rakugaki / Springtide"),$("#springtide .logo #springtide-logo").addClass("tada"),setTimeout(function(){$("#springtide .logo #springtide-logo").removeClass("tada")},1e3)):"/shiro"===$.address.value()?$.address.title("Rakugaki / Shiro"):"/kcalb"===$.address.value()?$.address.title("Rakugaki / Kcalb"):"/yabu-no-naka"===$.address.value()?($.address.title("Rakugaki / Yabu no Naka"),$("#yabu-no-naka .logo #yabu-logo").addClass("fadeInDown"),$(".bamboo .trigger").addClass("shake-delay"),setTimeout(function(){$(".bamboo .trigger").removeClass("shake-delay")},2e3)):"/about"===$.address.value()&&$.address.title("Rakugaki / Me")}),$(".bamboo").hover(function(){$(".bamboo .trigger").addClass("shake")},function(){$(".bamboo .trigger").removeClass("shake")}),$("#kcalb-logo").hover(function(){$("#kcalb .logo").addClass("bounce")},function(){$("#kcalb .logo").removeClass("bounce")}),$("#springtide-logo").hover(function(){$(this).addClass("tada")},function(){$(this).removeClass("tada")}),$(".md-get-theme").each(function(){$(this).css("width",140*$(this).children("a").length)}),$(".slide-index, .works-info-content-wrapper, .resume-wrapper").perfectScrollbar(),$(".show-info a").on(m,function(e){e.preventDefault();var t="#info-"+$(this).attr("data-info");$(t).hasClass("show")?$(t).removeClass("show"):$(t).addClass("show")}),$(".close-info-window").on(m,function(e){e.preventDefault();var t="#info-"+$(this).attr("data-info");$(t).removeClass("show")})});